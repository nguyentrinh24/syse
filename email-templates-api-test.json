{
  "email_templates_api_tests": {
    "description": "Test cases for EmailTemplate API endpoints",
    "base_url": "http://localhost:8080/api/email-templates",
    "auth_header": "Authorization: Bearer <your-jwt-token>",
    
    "test_cases": {
      "1_create_email_template": {
        "method": "POST",
        "endpoint": "/api/email-templates",
        "description": "Tạo mới email template (ADMIN only)",
        "headers": {
          "Content-Type": "application/json",
          "Authorization": "Bearer <your-jwt-token>"
        },
        "request_body": {
          "name": "Welcome Email Template",
          "code": "WELCOME_EMAIL",
          "subject": "Chào mừng bạn đến với SYSE",
          "content": "<h1>Xin chào {{username}}!</h1><p>Cảm ơn bạn đã đăng ký tài khoản tại SYSE.</p><p>Chúc bạn có trải nghiệm tốt!</p>",
          "placeholders": "[\"username\", \"fullName\"]",
          "status": true
        },
        "expected_response": {
          "id": 1,
          "name": "Welcome Email Template",
          "code": "WELCOME_EMAIL",
          "subject": "Chào mừng bạn đến với SYSE",
          "content": "<h1>Xin chào {{username}}!</h1><p>Cảm ơn bạn đã đăng ký tài khoản tại SYSE.</p><p>Chúc bạn có trải nghiệm tốt!</p>",
          "placeholders": "[\"username\", \"fullName\"]",
          "status": true,
          "createdAt": "2025-01-08T10:30:00"
        }
      },

      "2_create_password_reset_template": {
        "method": "POST",
        "endpoint": "/api/email-templates",
        "description": "Tạo template đặt lại mật khẩu",
        "headers": {
          "Content-Type": "application/json",
          "Authorization": "Bearer <your-jwt-token>"
        },
        "request_body": {
          "name": "Password Reset Template",
          "code": "PASSWORD_RESET",
          "subject": "Đặt lại mật khẩu - SYSE",
          "content": "<h2>Yêu cầu đặt lại mật khẩu</h2><p>Xin chào {{username}},</p><p>Bạn đã yêu cầu đặt lại mật khẩu. Vui lòng click vào link bên dưới:</p><p><a href=\"{{resetLink}}\">Đặt lại mật khẩu</a></p><p>Link này sẽ hết hạn sau 24 giờ.</p><p>Nếu bạn không yêu cầu đặt lại mật khẩu, vui lòng bỏ qua email này.</p>",
          "placeholders": "[\"username\", \"resetLink\"]",
          "status": true
        }
      },

      "3_create_order_confirmation_template": {
        "method": "POST",
        "endpoint": "/api/email-templates",
        "description": "Tạo template xác nhận đơn hàng",
        "headers": {
          "Content-Type": "application/json",
          "Authorization": "Bearer <your-jwt-token>"
        },
        "request_body": {
          "name": "Order Confirmation Template",
          "code": "ORDER_CONFIRM",
          "subject": "Xác nhận đơn hàng #{{orderNumber}}",
          "content": "<h2>Xác nhận đơn hàng</h2><p>Xin chào {{customerName}},</p><p>Cảm ơn bạn đã đặt hàng. Chi tiết đơn hàng:</p><ul><li>Mã đơn hàng: {{orderNumber}}</li><li>Tổng tiền: {{totalAmount}}</li><li>Ngày đặt: {{orderDate}}</li></ul><p>Chúng tôi sẽ xử lý đơn hàng của bạn sớm nhất có thể.</p>",
          "placeholders": "[\"customerName\", \"orderNumber\", \"totalAmount\", \"orderDate\"]",
          "status": true
        }
      },

      "4_get_all_templates": {
        "method": "GET",
        "endpoint": "/api/email-templates",
        "description": "Lấy danh sách tất cả email templates",
        "headers": {
          "Authorization": "Bearer <your-jwt-token>"
        },
        "expected_response": [
          {
            "id": 1,
            "name": "Welcome Email Template",
            "code": "WELCOME_EMAIL",
            "subject": "Chào mừng bạn đến với SYSE",
            "content": "<h1>Xin chào {{username}}!</h1><p>Cảm ơn bạn đã đăng ký tài khoản tại SYSE.</p>",
            "placeholders": "[\"username\", \"fullName\"]",
            "status": true,
            "createdAt": "2025-01-08T10:30:00"
          }
        ]
      },

      "5_filter_templates_by_status": {
        "method": "GET",
        "endpoint": "/api/email-templates?status=true",
        "description": "Lọc templates theo trạng thái active",
        "headers": {
          "Authorization": "Bearer <your-jwt-token>"
        },
        "expected_response": [
          {
            "id": 1,
            "name": "Welcome Email Template",
            "code": "WELCOME_EMAIL",
            "status": true
          }
        ]
      },

      "6_filter_templates_by_code": {
        "method": "GET",
        "endpoint": "/api/email-templates?code=WELCOME_EMAIL",
        "description": "Lọc templates theo code",
        "headers": {
          "Authorization": "Bearer <your-jwt-token>"
        },
        "expected_response": [
          {
            "id": 1,
            "name": "Welcome Email Template",
            "code": "WELCOME_EMAIL",
            "subject": "Chào mừng bạn đến với SYSE"
          }
        ]
      },

      "7_filter_templates_by_creator": {
        "method": "GET",
        "endpoint": "/api/email-templates?createdBy=1",
        "description": "Lọc templates theo người tạo",
        "headers": {
          "Authorization": "Bearer <your-jwt-token>"
        },
        "expected_response": [
          {
            "id": 1,
            "name": "Welcome Email Template",
            "code": "WELCOME_EMAIL",
            "createdBy": 1
          }
        ]
      },

      "8_get_template_by_id": {
        "method": "GET",
        "endpoint": "/api/email-templates/1",
        "description": "Lấy chi tiết template theo ID",
        "headers": {
          "Authorization": "Bearer <your-jwt-token>"
        },
        "expected_response": {
          "id": 1,
          "name": "Welcome Email Template",
          "code": "WELCOME_EMAIL",
          "subject": "Chào mừng bạn đến với SYSE",
          "content": "<h1>Xin chào {{username}}!</h1><p>Cảm ơn bạn đã đăng ký tài khoản tại SYSE.</p>",
          "placeholders": "[\"username\", \"fullName\"]",
          "status": true,
          "createdAt": "2025-01-08T10:30:00"
        }
      },

      "9_get_template_by_code": {
        "method": "GET",
        "endpoint": "/api/email-templates/code/WELCOME_EMAIL",
        "description": "Lấy chi tiết template theo code",
        "headers": {
          "Authorization": "Bearer <your-jwt-token>"
        },
        "expected_response": {
          "id": 1,
          "name": "Welcome Email Template",
          "code": "WELCOME_EMAIL",
          "subject": "Chào mừng bạn đến với SYSE",
          "content": "<h1>Xin chào {{username}}!</h1><p>Cảm ơn bạn đã đăng ký tài khoản tại SYSE.</p>",
          "placeholders": "[\"username\", \"fullName\"]",
          "status": true
        }
      },

      "10_update_template": {
        "method": "PUT",
        "endpoint": "/api/email-templates/1",
        "description": "Cập nhật email template (ADMIN only)",
        "headers": {
          "Content-Type": "application/json",
          "Authorization": "Bearer <your-jwt-token>"
        },
        "request_body": {
          "name": "Welcome Email Template - Updated",
          "code": "WELCOME_EMAIL",
          "subject": "Chào mừng bạn đến với SYSE - Phiên bản mới",
          "content": "<h1>Xin chào {{username}}!</h1><p>Cảm ơn bạn đã đăng ký tài khoản tại SYSE.</p><p>Chúc bạn có trải nghiệm tuyệt vời!</p><p>Trân trọng,<br>Đội ngũ SYSE</p>",
          "placeholders": "[\"username\", \"fullName\", \"companyName\"]",
          "status": true
        },
        "expected_response": {
          "id": 1,
          "name": "Welcome Email Template - Updated",
          "code": "WELCOME_EMAIL",
          "subject": "Chào mừng bạn đến với SYSE - Phiên bản mới",
          "content": "<h1>Xin chào {{username}}!</h1><p>Cảm ơn bạn đã đăng ký tài khoản tại SYSE.</p><p>Chúc bạn có trải nghiệm tuyệt vời!</p><p>Trân trọng,<br>Đội ngũ SYSE</p>",
          "placeholders": "[\"username\", \"fullName\", \"companyName\"]",
          "status": true
        }
      },

      "11_disable_template": {
        "method": "DELETE",
        "endpoint": "/api/email-templates/1",
        "description": "Vô hiệu hóa template (ADMIN only)",
        "headers": {
          "Authorization": "Bearer <your-jwt-token>"
        },
        "expected_response": {
          "success": true
        }
      },

      "12_error_cases": {
        "create_duplicate_code": {
          "method": "POST",
          "endpoint": "/api/email-templates",
          "description": "Tạo template với code đã tồn tại (sẽ lỗi)",
          "headers": {
            "Content-Type": "application/json",
            "Authorization": "Bearer <your-jwt-token>"
          },
          "request_body": {
            "name": "Duplicate Template",
            "code": "WELCOME_EMAIL",
            "subject": "This will fail",
            "content": "Content here",
            "placeholders": "[]",
            "status": true
          },
          "expected_error": "Duplicate entry for key 'uk_email_templates_code'"
        },

        "get_nonexistent_template": {
          "method": "GET",
          "endpoint": "/api/email-templates/999",
          "description": "Lấy template không tồn tại",
          "headers": {
            "Authorization": "Bearer <your-jwt-token>"
          },
          "expected_response": null
        },

        "update_nonexistent_template": {
          "method": "PUT",
          "endpoint": "/api/email-templates/999",
          "description": "Cập nhật template không tồn tại",
          "headers": {
            "Content-Type": "application/json",
            "Authorization": "Bearer <your-jwt-token>"
          },
          "request_body": {
            "name": "Non-existent Template",
            "code": "NON_EXISTENT",
            "subject": "This will fail",
            "content": "Content here",
            "placeholders": "[]",
            "status": true
          },
          "expected_error": "Template not found"
        }
      }
    },

    "curl_examples": {
      "create_template": "curl -X POST http://localhost:8080/api/email-templates \\\n  -H 'Content-Type: application/json' \\\n  -H 'Authorization: Bearer <your-jwt-token>' \\\n  -d '{\n    \"name\": \"Welcome Email Template\",\n    \"code\": \"WELCOME_EMAIL\",\n    \"subject\": \"Chào mừng bạn đến với SYSE\",\n    \"content\": \"<h1>Xin chào {{username}}!</h1><p>Cảm ơn bạn đã đăng ký.</p>\",\n    \"placeholders\": \"[\\\"username\\\", \\\"fullName\\\"]\",\n    \"status\": true\n  }'",

      "get_all_templates": "curl -X GET http://localhost:8080/api/email-templates \\\n  -H 'Authorization: Bearer <your-jwt-token>'",

      "get_template_by_id": "curl -X GET http://localhost:8080/api/email-templates/1 \\\n  -H 'Authorization: Bearer <your-jwt-token>'",

      "update_template": "curl -X PUT http://localhost:8080/api/email-templates/1 \\\n  -H 'Content-Type: application/json' \\\n  -H 'Authorization: Bearer <your-jwt-token>' \\\n  -d '{\n    \"name\": \"Updated Template\",\n    \"code\": \"WELCOME_EMAIL\",\n    \"subject\": \"Updated Subject\",\n    \"content\": \"<h1>Updated Content</h1>\",\n    \"placeholders\": \"[\\\"username\\\"]\",\n    \"status\": true\n  }'",

      "disable_template": "curl -X DELETE http://localhost:8080/api/email-templates/1 \\\n  -H 'Authorization: Bearer <your-jwt-token>'"
    },

    "postman_collection": {
      "info": {
        "name": "Email Templates API",
        "description": "Collection for testing EmailTemplate APIs"
      },
      "item": [
        {
          "name": "Create Email Template",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer <your-jwt-token>"
              }
            ],
            "url": "http://localhost:8080/api/email-templates",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Welcome Email Template\",\n  \"code\": \"WELCOME_EMAIL\",\n  \"subject\": \"Chào mừng bạn đến với SYSE\",\n  \"content\": \"<h1>Xin chào {{username}}!</h1><p>Cảm ơn bạn đã đăng ký.</p>\",\n  \"placeholders\": \"[\\\"username\\\", \\\"fullName\\\"]\",\n  \"status\": true\n}"
            }
          }
        },
        {
          "name": "Get All Templates",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer <your-jwt-token>"
              }
            ],
            "url": "http://localhost:8080/api/email-templates"
          }
        },
        {
          "name": "Get Template by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer <your-jwt-token>"
              }
            ],
            "url": "http://localhost:8080/api/email-templates/1"
          }
        },
        {
          "name": "Update Template",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer <your-jwt-token>"
              }
            ],
            "url": "http://localhost:8080/api/email-templates/1",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Updated Template\",\n  \"code\": \"WELCOME_EMAIL\",\n  \"subject\": \"Updated Subject\",\n  \"content\": \"<h1>Updated Content</h1>\",\n  \"placeholders\": \"[\\\"username\\\"]\",\n  \"status\": true\n}"
            }
          }
        },
        {
          "name": "Disable Template",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer <your-jwt-token>"
              }
            ],
            "url": "http://localhost:8080/api/email-templates/1"
          }
        }
      ]
    }
  }
} 